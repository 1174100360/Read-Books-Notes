# 10.正则表达式

- 进修正则表达式
- 编译正则表达式
- 使用正则表达式进行捕获
- 使用常见的正则表达式

在主流的 JavaScript 库中， 可以看到开发者大量使用正则表达式解决各种任务。

- 操作 HTML 节点中的字符串。
- 使用 CSS 选择器表达式定位部分选择器。
- 判断一个元素是否具有指定的类名(class)。
- 输入校验。
- 其他人物。

> 通正则表达式需要大量的练习。可以使用网站如JSBin很方便地练习。有许多网站致力于测试正则表达式: [JavaScript 正则表达式测试](www.regexplanet.com/advanced/javascript/index.html) 和 [egex101](www.regex101.com/#javascript)。regex101 对于新手是特别有用的网站，可以自动生成正则表达式的解读。

## 正则表达式进阶

> 当正则表达式在开发环境是明确的，推荐优先使用字面量语法;当需要在运行时动态创建字符串来构建正则表达式时，则使用构造函数的方式。

除了表达式本身，还可以使用 5 个修饰符:

- i —— 对大小写不敏感。
- g —— 查找所有匹配项，在查找到第一个匹配时不会停止，会继续查找下一个匹配项。
- m —— 允许多行匹配，对获取 textarea 元素的值很有用。
- y —— 开启粘连匹配。正则表达式执行粘连匹配时试图从最后一个匹配的位置开始。
- u —— 允许使用 Unicode 点转义符(\u{...})。

### 术语和操作符

- 精确匹配：`/test/.test('test')`
- 匹配字符集：
  - `/[abc]/` 匹配a、b、c任意
  - `/^abc/` 除abc以外
  - `/[a-z]/` a-z 之间所有字符
- 起止符号：
  - `/^test/` 匹配字符串的开始(注意，这只是字符的重载，尖角号`^`还可以表示非)
  - `/test$/` 匹配字符串的结束，同时使用 `^` 与 `$` 表示匹配整个字符串
- 重复出现：
  - `/aaaa/` 匹配 4 个连续的字符 a
  - 匹配任意数量的相同的字符
    - 指定可选字符(可以出现 0 次或 1 次)，在字符后添加 ? ，例如，`/t?est/`可以同时匹配 test 与 est。
    - 指定字符必须出现 1 次或多次，使用 + ，如`/t+est/`可匹配 test、ttest、 tttest 等。
    - 指定字符出现 0 次或 1 次或多次，使用 * ，如`/t*est/`匹配 test、ttest、tttest 以及 est。
    - 指定重复次数，使用括号指定重复次数，例如 `/a{4}/`，匹配 4 个连续的字符 a。
    - 指定循环次数的范围，使用逗号分隔，例如`/a{4,10}/`匹配 4~10 个连续的字符 a。
    - 指定开放区间，省略第 2 个值，保留逗号。例如`/a{4,}/`匹配 4 个或更多个连续的字符 a。
    - 些运算符都可以是贪婪的或非贪婪的。默认是贪婪模式，可以匹配所有可能的字符。在运算符后添加`?`，例如 `a+?`，使得运算符为非贪婪模式，只进行最小限度的匹配。
- 预定义字符集
  - `\t`   水平制表符
  - `\b`   空格
  - `\r`   回车符
  - `\f`   换页符
  - `\h`   换行符
  - `\cA:\cZ`   控制字符
  - `\u0000:\uFFFF`   十六进制 Unicode 码
  - `\x00:\xFF`   十六进制 ASCII 码
  - `.`   匹配除换行字符(`\n`、`\r`、`\u2028` 和`\u2029`)之外的任意字符
  - `\d`   匹配任意十进制数字，等价于[0-9]
  - `\D`   匹配除了十进制数字外的任意字符，等价于[^0-9]
  - `\w`   匹配任何字母、数字和下划线，等价于[A-Za-z0-9_]
  - `\W`   匹配除了字母、数字和下划线之外的字符，等价于[^A-Za-z0-9_]
  - `\s`   匹配任意空白字符(包括空格、制表符、换页符等)
  - `\S`   匹配除空白字符外的任意字符
  - `\b`   匹配单词边界
  - `\B`   匹配非单词边界(单词内部)
- 分组